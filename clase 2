--crear un registro en oracle
CREATE TABLE USUARIO1(
ID_USUARIO1 INTEGER, 
NOMBRE VARCHAR2 (120),
EMAIL VARCHAR2 (90),
SUELDO_BASE FLOAT,
CONSTRAINT PK_ID_USUARIO1 PRIMARY KEY(ID_USUARIO1));

CREATE TABLE DIRECCION(
ID_DIRECCION INTEGER,
ID_USUARIO1 INTEGER, 
CALLE VARCHAR2 (180),
NUMERO INTEGER,
COLONIA VARCHAR(250),
MUNICIPIO VARCHAR(180),
CP INTEGER,
CONSTRAINT PK_ID_DIRECCION PRIMARY KEY(ID_DIRECCION),
CONSTRAINT FK_ID_USUARIO1 FOREIGN KEY(ID_USUARIO1) REFERENCES USUARIO1(ID_USUARIO1));


--CREAR UNA SECUENCIA
CREATE SEQUENCE SEC_USUARIO1
START WITH 1
INCREMENT BY 1
NOMAXVALUE;

CREATE SEQUENCE SEC_DIRECCION
START WITH 1
INCREMENT BY 1
NOMAXVALUE;

/
--ASOCIAR LA SECUENCIA CREADA A LA TABLA Y GENERAR PROCEDIMIENTO PARA INSERTAR
CREATE OR REPLACE PROCEDURE GUARDAR_USUARIO1(MY_ID_USUARIO1 OUT INTEGER, MY_NOMBRE IN VARCHAR2, MY_EMAIL IN VARCHAR2, MY_SUELDO_BASE IN FLOAT)
AS
BEGIN
SELECT SEC_USUARIO1.NEXTVAL INTO MY_ID_USUARIO1 FROM DUAL;
INSERT INTO USUARIO1 VALUES (MY_ID_USUARIO1, MY_NOMBRE, MY_EMAIL, MY_SUELDO_BASE);
END;

PROCEDURE GUARDAR_TODO( MY_NOMBRE IN VARCHAR2, MY_EMAIL IN VARCHAR2, MY_SUELDO_BASE IN FLOAT , MY_ID_DIRECCION OUT INTEGER, MY_CALLE IN VARCHAR2, MY_NUMERO IN INTEGER, MY_COLONIA IN VARCHAR2, MY_MUNICIPIO IN VARCHAR2, MY_CP IN INTEGER)
AS
ALGO INTEGER;
BEGIN
GUARDAR_USUARIO1 (ALGO, MY_NOMBRE, MY_EMAIL, MY_SUELDO_BASE);
SELECT SEC_DIRECCION.NEXTVAL INTO  MY_ID_DIRECCION FROM DUAL;
INSERT INTO DIRECCION VALUES (MY_ID_DIRECCION, ALGO, MY_CALLE , MY_NUMERO, MY_COLONIA , MY_MUNICIPIO , MY_CP);
END;

/

DECLARE
ALGO INTEGER;
BEGIN
GUARDAR_USUARIO1(ALGO,'GABO','GABO1891@GMAIL.COM',35000);
END;
/

SELECT * FROM USUARIO1;

/

